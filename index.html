<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="./style.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script scr="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/4.0.2/bootstrap-material-design.css"
        rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
        rel="stylesheet" />




</head>

<body>
    <div id="center-text">
        <h2>ChatBox UI</h2>
        <p>Message send and scroll to bottom enabled </p>
    </div>
    <div id="body">

        <div id="chat-circle" class="btn btn-raised" onclick="popup();">
            <div id="chat-overlay"></div>
            <i class="material-icons">speaker_phone</i>
        </div>

        <div class="chat-box">
            <div class="chat-box-header">
                ChatBot
                <span class="chat-box-toggle"><i class="material-icons">close</i></span>
            </div>
            <div class="chat-box-body">
                <div class="chat-box-overlay">
                </div>
                <div class="chat-logs">

                </div>
                <!--chat-log -->
            </div>
            <div class="chat-input">
                <form>
                    <input type="text" id="chat-input" placeholder="Send a message..." />
                    <button type="submit" class="chat-submit" id="chat-submit"><i
                            class="material-icons">send</i></button>
                </form>
            </div>
        </div>




    </div>
    <script src="./main.js"></script>
    <script>
        var INDEX = 0;
        function popup() {
            //alert('call check');
            setTimeout(() => {
                generate_Default_message('Hi,I am your virtual assistant', 'self');
            }, 1000);
            setTimeout(() => {
                generate_Default_message('How can I help you?Please select from FAQ list listed below', 'self');
            }, 3000);
            setTimeout(() => {
                generate_Default_message('What is my current plan', 'self');
            generate_Default_message('What is my current balance', 'self');
            generate_Default_message('How to topup', 'self');
            }, 5000);
            
         
        }
        function bot_replies(id) {
            // alert(id);
            if (id == 'cm-msg-1') {

            } else if (id == 'cm-msg-2') {

            } else if (id == 'cm-msg-3') {
                var user_selection = 'What is my current plan';
                generate_message(user_selection, 'user');
                setTimeout(function() {
                var bot_reply = 'Please type #3452 to know your existing plan.';    
        generate_message_bot_reply(bot_reply, 'self');
    }, 1000)
            }
            else if (id == 'cm-msg-4') {
                var user_selection = 'What is my current balance';
                generate_message(user_selection, 'user');
                setTimeout(function() {
                var bot_reply = 'Please type *#123 to know your balance.';    
        generate_message_bot_reply(bot_reply, 'self');
    }, 1000)
            }
            else if( id == 'cm-msg-5'){
                var user_selection = 'How to topup';
                generate_message(user_selection, 'user');
                setTimeout(function() {
                var bot_reply = 'Please type #546 space and your top up ammount.';    
        generate_message_bot_reply(bot_reply, 'self');
    }, 1000)
            }

        }
        function generate_Default_message(msg, type) {
            INDEX++;
            var str = "";
            str += "<div id='cm-msg-" + INDEX + "' class=\"chat-msg " + type + "\" onclick='bot_replies(this.id)'>";
            str += "          <span class=\"msg-avatar\">";
            str += "            <img src=\"bot.jpg\">";
            str += "          <\/span>";
            str += "          <div class=\"cm-msg-text\">";
            str += msg;
            str += "          <\/div>";
            str += "        <\/div>";
            $(".chat-logs").append(str);
            $("#cm-msg-" + INDEX).hide().fadeIn(300);
            if (type == 'self') {
                $("#chat-input").val('');
            }
            $(".chat-logs").stop().animate({ scrollTop: $(".chat-logs")[0].scrollHeight }, 1000);
        }  
    </script>
</body>

</html>